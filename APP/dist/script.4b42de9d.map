{"version":3,"sources":["script.js"],"names":["observer","MutationObserver","mutations","forEach","mutation","addedNodes","i","length","document","querySelectorAll","filter","e","parentNode","nodeName","addEventListener","textfly","x","target","style","animation","getElementById","appendChild","Object","assign","createElement","id","innerHTML","setAttribute","fetch","last_searched","then","res","ok","json","console","error","status","Array","obj","fill","map","join","window","onresize","log","chartOccurence","Chart","getContext","type","data","datasets","entries","specifics","backgroundColor","undefined","co","lor","Math","floor","random","labels","title","options","responsive","chartFrequency","tfidf","values","reduce","p","n","fetcherror","str","alert","searchtopbar","search","about","topbar","which","value","removeChild","website_display","cloud","sort","a","b","slice","descriptionControl","getAttribute","description","links","body","l","link","push","keys","prev","next","childNodes","searchbar","tags","observe","childList","subtree","attributes","characterData","update","layout","font","spiral","fontSize","d3","scale","range","domain","stop","words","start","category20b","w","innerWidth","h","innerHeight","max","timeInterval","Infinity","size","d","text","key","on","draw","svg","select","append","attr","vis","bounds","min","abs","y","selectAll","toLowerCase","transition","duration","rotate","enter"],"mappings":"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","file":"script.4b42de9d.map","sourceRoot":"..","sourcesContent":["\r\n\r\nvar observer = new MutationObserver(function(mutations) {\r\n    mutations.forEach(function(mutation) {\r\n      if (!mutation.addedNodes) return\r\n      for (var i = 0; i < mutation.addedNodes.length; i++) {\r\n        if([...document.querySelectorAll('text')].filter(e=>e.parentNode.nodeName==='g').length === 101){\r\n            [...document.querySelectorAll('text')].forEach(e=>e.addEventListener('click', textfly))\r\n        }\r\n      }\r\n    })\r\n  })\r\n\r\nthrow('this is an error');\r\nfunction textfly(e){\r\n    [...document.querySelectorAll('text')].filter(x=>x!==e.target).forEach(e=>{e.style.animation = 'moveoffscreen 4s forwards'});\r\n    document.getElementById('cloud-container').appendChild(Object.assign(document.createElement('canvas'), {id: 'chart-occurence'}))\r\n    document.getElementById('cloud-container').appendChild(Object.assign(document.createElement('canvas'), {id: 'chart-frequency'}))\r\n    document.getElementById('cloud-container').innerHTML += `<button class=\"btn btn-primary\" onclick=\"cloud(Object.entries(data.tfidf).sort((a,b)=>b[1]-a[1]).slice(0, 100 + 1).map(e=>{return{'key': e[0], 'value': e[1]}}))\" style=\"position: absolute; top: 75px; left: 50px; width: 200px; height: 200px;\">Back to Wordcloud </button>`;\r\n    e.target.setAttribute('transform', 'translate(0,0)rotate(0)');\r\n    fetch('http://127.0.0.1:5000/relatedWords?querystring=' + last_searched + '&wordSearch=' + e.target.innerHTML)\r\n    .then(res=>res.ok ? res.json() : console.error('http error ' + res.status))\r\n    .then(obj=>document.getElementById('websites').innerHTML = '<div id=\"related-words\">' + Array(obj.length).fill(null).map(((x,i)=>'<p>'+obj[i]+'</p>')).join('') + '</div>' + document.getElementById('websites').innerHTML);\r\n    delete window.onresize;\r\n    console.log(e.target);\r\n    window.chartOccurence = new Chart(document.getElementById('chart-occurence').getContext('2d'), {\r\n        type: 'doughnut',\r\n        data: {\r\n            datasets: [{\r\n                data: Object.entries(data.specifics).filter(x=>x[1].data[e.target.innerHTML]).map(x=>x[1].data[e.target.innerHTML]),\r\n                backgroundColor: Array(Object.entries(data.specifics).filter(x=>x[1].data[e.target.innerHTML]).length).fill(undefined).map(x=>'#' + (function co(lor){   return (lor += [0,1,2,3,4,5,6,7,8,9,'a','b','c','d','e','f'][Math.floor(Math.random()*16)]) && (lor.length == 6) ?  lor : co(lor); })(''))\r\n            }],\r\n            labels: Object.entries(data.specifics).filter(x=>x[1].data[e.target.innerHTML]).map(x=>x[1].title)\r\n        },\r\n        options: {\r\n            responsive: false\r\n        }\r\n    });\r\n    window.chartFrequency = new Chart(document.getElementById('chart-frequency').getContext('2d'), {\r\n        type: 'doughnut',\r\n        data: {\r\n            datasets: [{\r\n                data: [data.tfidf[e.target.innerHTML], Object.values(data.tfidf).reduce((p,n)=>p+n)],\r\n                backgroundColor: Array(2).fill(undefined).map(x=>'#' + (function co(lor){   return (lor += [0,1,2,3,4,5,6,7,8,9,'a','b','c','d','e','f'][Math.floor(Math.random()*16)]) && (lor.length == 6) ?  lor : co(lor); })(''))\r\n            }],\r\n            labels: [e.target.innerHTML, 'the rest of the data']\r\n        },\r\n        options: {\r\n            responsive: false\r\n        }\r\n    })\r\n   \r\n}\r\n\r\nfunction fetcherror(str){\r\n\t// TODO: add UI of error\r\n\talert(str)\r\n}\r\n\r\nlet searchtopbar = Object.assign(document.createElement('input'), {id: 'searchtopbar'});\r\nsearchtopbar.addEventListener('keypress', search);\r\nsearchtopbar.setAttribute('placeholder', 'Enter search here...')\r\n\r\nfunction about(){\r\n    document.getElementById('root-container').innerHTML = `THE DATA REFINERY, a project to make information more easily accessible and usable.\r\n    <br>\r\n    Credits: virchau13, junyynyyn, JustATin555<br>\r\n    Version: v1.0.0<br>\r\n    Installation: You're already here!<br>`\r\n    topbar.appendChild(searchtopbar)\r\n}\r\n\r\nfunction search(e){\r\n    if(e.which === 13){\r\n        window.last_searched = e.target.value;\r\n        if(!document.getElementById('searchbar')){ document.getElementById('root-container').innerHTML = `<div id=\"searchbar\">\r\n        <div id=\"loader\" style=\"border: 8px solid #f3f3f3; \r\n        border-top: 8px solid #555;\r\n        border-radius: 50%;\r\n        width: 50px;\r\n        height: 50px;\r\n        margin-left: 30%;\r\n        animation: spin 2s linear infinite;\"></div><br><p> Loading search results... </p>\r\n    </div>\r\n    <div id=\"cloud-container\">\t\r\n    </div>` } else {\r\n        // make loading bar\r\n        document.getElementById('searchbar').innerHTML = `<div id=\"loader\" style=\"border: 8px solid #f3f3f3; \r\n        border-top: 8px solid #555;\r\n        border-radius: 50%;\r\n        width: 50px;\r\n        height: 50px;\r\n        margin-left: 30%;\r\n        animation: spin 2s linear infinite;\"></div><br><p> Loading search results... </p>`\r\n    }\r\n        // GET data from server for rendering\r\n        fetch(\"http://127.0.0.1:5000/scrape?querystring=\" + e.target.value)\r\n        .then((res) => res.ok ? res.json() : fetcherror('ERROR fetching from 192.168.1.81:5000/?query=' + e.target.value + '. HTTP Response code is ' + res.status))\r\n        .then((data) => {topbar.appendChild(searchtopbar); \r\n            window.data = data; \r\n            if(document.getElementById('searchbar')){ \r\n                document.getElementById('root-container').removeChild(document.getElementById('searchbar'));\r\n            }\r\n            console.log(data); \r\n            website_display(data.specifics); \r\n            cloud(Object.entries(data.tfidf).sort((a,b)=>b[1]-a[1]).slice(0, 100 + 1).map(e=>{return{'key': e[0], 'value': e[1]}}));\r\n        });\r\n    }\r\n}\r\n\r\nfunction descriptionControl(e){\r\n    document.getElementById('description-box').innerHTML = data.specifics[e.target.getAttribute('href')].description;\r\n}\r\n\r\nfunction website_display(links){\r\n    document.body.innerHTML += `<div id=\"websites\"></div><div id=\"description-box\"></div>`\r\n    l = [];\r\n    for(let link in links){\r\n        l.push(`<a href=\"` + link + `\">` + links[link].title + `</a>`)\r\n    }\r\n    Object.keys(links).reduce((prev, next)=>next.length > prev.length)\r\n    document.getElementById('websites').innerHTML = l.join('<br>');\r\n    [...document.getElementById('websites').childNodes].forEach(e=>e.addEventListener(\"mouseover\", descriptionControl));\r\n}\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n\t// searchbar controls\r\n\tlet searchbar = document.getElementById(\"search\");\r\n    searchbar.addEventListener(\"keypress\", search)\r\n})\r\n\r\nfunction cloud(tags){\r\nconsole.log('hey! i ran cloud!')\r\nif(document.getElementById('related-words')){\r\n    document.getElementById('related-words').parentNode.removeChild(document.getElementById('related-words'));\r\n}\r\ndocument.getElementById('cloud-container').innerHTML = '';\r\nobserver.observe(document.getElementById('cloud-container'), {\r\n    childList: true,\r\n    subtree: true, \r\n    attributes: false, \r\n    characterData: false\r\n});\r\n\r\nfunction update() {\r\n    console.log('update cloud was called');\r\n    layout.font('impact').spiral('archimedean');\r\n    fontSize = d3.scale['sqrt']().range([10, 100]);\r\n    if (tags.length){\r\n        fontSize.domain([+tags[tags.length - 1].value || 1, +tags[0].value]);\r\n    }\r\n    layout.stop().words(tags).start();\r\n}\r\n\r\nvar fill = d3.scale.category20b();\r\n\r\nvar w = window.innerWidth,\r\n        h = window.innerHeight;\r\n\r\nvar max,\r\n        fontSize;\r\n\r\nvar layout = d3.layout.cloud()\r\n        .timeInterval(Infinity)\r\n        .size([w, h])\r\n        .fontSize(function(d) {\r\n            return fontSize(+d.value);\r\n        })\r\n        .text(function(d) {\r\n            return d.key;\r\n        })\r\n        .on(\"end\", draw);\r\n\r\nvar svg = d3.select(\"#cloud-container\").append(\"svg\")\r\n        .attr(\"width\", w)\r\n        .attr(\"height\", h)\r\n\r\nvar vis = svg.append(\"g\").attr(\"transform\", \"translate(\" + [w >> 1, h >> 1] + \")\");\r\n\r\nwindow.onresize = function(){ update(); }\r\n\r\nfunction draw(data, bounds) {\r\n    console.log('draw');\r\n    var w = window.innerWidth,\r\n        h = window.innerHeight;\r\n    console.log(w,h);\r\n    svg.attr(\"width\", w).attr(\"height\", h);\r\n\r\n    scale = bounds ? Math.min(\r\n            w / Math.abs(bounds[1].x - w / 2),\r\n            w / Math.abs(bounds[0].x - w / 2),\r\n            h / Math.abs(bounds[1].y - h / 2),\r\n            h / Math.abs(bounds[0].y - h / 2)) / 2 : 1;\r\n\r\n    var text = vis.selectAll(\"text\")\r\n            .data(data, function(d) {\r\n                return d.text.toLowerCase();\r\n            });\r\n    text.transition()\r\n            .duration(1000)\r\n            .attr(\"transform\", function(d) {\r\n                return \"translate(\" + [d.x, d.y] + \")rotate(\" + d.rotate + \")\";\r\n            })\r\n            .style(\"font-size\", function(d) {\r\n                return d.size + \"px\";\r\n            });\r\n    text.enter().append(\"text\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"transform\", function(d) {\r\n                return \"translate(\" + [d.x, d.y] + \")rotate(\" + d.rotate + \")\";\r\n            })\r\n            .style(\"font-size\", function(d) {\r\n                return d.size + \"px\";\r\n            })\r\n            .style(\"opacity\", 1e-6)\r\n            .transition()\r\n            .duration(1000)\r\n            .style(\"opacity\", 1);\r\n    text.style(\"font-family\", function(d) {\r\n        return d.font;\r\n    })\r\n            .style(\"fill\", function(d) {\r\n                return fill(d.text.toLowerCase());\r\n            })\r\n            .text(function(d) {\r\n                return d.text;\r\n            });\r\n\r\n    vis.transition().attr(\"transform\", \"translate(\" + [w >> 1, h >> 1] + \")scale(\" + scale + \")\");\r\n}\r\n\r\n\r\n\r\nupdate();\r\n}"]}